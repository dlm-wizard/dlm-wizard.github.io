<!-- MarkdownTOC -->

- [一 从认识操作系统开始](#一-从认识操作系统开始)
  - [1.1 操作系统简介](#_11-操作系统简介)
  - [1.2 操作系统简单分类](#_12-操作系统简单分类)
- [二 初探 Linux](#二-初探linux)
  - [2.1 Linux 简介](#_21-linux简介)
- [三 Linux 文件系统概览](#三-linux文件系统概览)
  - [3.1 Linux 文件系统简介](#_31-linux文件系统简介)
  - [3.2 文件类型与目录结构](#_32-文件类型与目录结构)
- [四 Linux 基本命令](#四-linux基本命令)
  - [4.1 目录切换命令](#_41-目录切换命令)
  - [4.2 目录的操作命令（增删改查）](#_42-目录的操作命令增删改查)
  - [4.3 文件的操作命令（增删改查）](#_43-文件的操作命令增删改查)
  - [4.4 压缩文件的操作命令](#_44-压缩文件的操作命令)
  - [4.5 Linux 的权限命令](#_45-linux的权限命令)
  - [4.6 Linux 用户管理](#_46-linux用户管理)
  - [4.7 Linux 系统用户组的管理](#_47-linux系统用户组的管理)
  - [4.8 其他常用命令](#_48-其他常用命令)
- [参考](#参考)

<!-- /MarkdownTOC -->

推荐一个 Github 开源的 Linux 学习指南(Java 工程师向)：<https://github.com/judasn/Linux-Tutorial>

[Bash 常用命令](https://github.com/judasn/Linux-Tutorial/blob/master/markdown-file/Bash.md)

> 学习 Linux 之前，我们先来简单的认识一下操作系统。

## 一 从认识操作系统开始

### 1.1 操作系统简介

我通过以下四点介绍什么是操作系统：

**操作系统（Operation System）是控制和管理整个计算机系统的硬件和软件资源，并合理的组织调度工作和资源的分配；**

- 处理机(进程)管理
- 文件管理
- 存储器管理

```bash
进程是一个程序的执行过程，执行前需要将该程序放入到内存中，才能被 cpu 处理

比如：微信视频聊天的过程
# 1. 文件管理
在文件夹中找到微信安装位置(/Applications/WeChat.app)

# 2. 存储器管理
执行 WeChat.exec

# 3. 处理机管理
微信正常运行(cpu处理进程)

# 4. 设备管理
分配摄像头资源给微信进程
```

- 设备管理

**提供给用户和其他软件方便的接口和环境,是计算机系统中最基本的「系统软件」；**

- ** - shell 和 GUI 作为用户和操作系统之间的接口**
- GUI
- 命令接口

```
交互式 CLI or shell 脚本（批处理）
```

- 程序接口**（系统调用）**

```
用户通过程序间接使用，如 java 中 write 写文件的方法，编译后通过汇编语言 INT(陷入) 指令在 kernel 执行特权指令
```

**操作系统分内核与外壳（我们可以把外壳理解成围绕着内核的应用程序，而内核就是能操作硬件的程序）。**

<div align="center">  <img src="https://github.com/dlm-wizard/dlm-wizard.github.io/blob/master/Linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/assets/Kernel.png?raw=true" width="40%" height="40%"/></div><br>

**terminal**

terminal 并不知道如何处理你输入的内容，而将你的输入发送给独立的处理程序。

shell 为命令行解释器（输入解释为命令）。是独立处理程序的一种，同样可以在不使用终端的情况下使用，如 shell 脚本编程。

tty

- old：电传打字机 (Teletype / Teletypewriter) 的英文缩写
- now：terminal 就是 tty

**env**

环境变量允许修改系统相关变量值，允许用户自定义环境变量

shell 作为一个进程运行在操作系统之上，而我们在 shell 中运行的大部分命令都将以 shell 子进程方式进行。

shell 环境变量作用于自身与子进程，**如果写入配置文件，会在所有 shell 进程中生效**

**PATH**

[MAC 设置环境变量 PATH 和 查看 PATH](https://www.jianshu.com/p/acb1f062a925)

linux 中，可执行文件的运行一定要用路径执行。系统命令（二进制可执行文件）可执行的原因在于系统会在 PATH 中查找可执行文件。

PATH 为`:`分割的路径。通过 `echo $PATH` 查看。

### 1.2 操作系统简单分类

OS 特征：并发、共享、虚拟、异步

1. **Unix：** 最早的多用户、多任务操作系统 .按照操作系统的分类，属于分时操作系统。Unix 大多被用在服务器、工作站，现在也有用在个人计算机上。它在创建互联网、计算机网络或客户端/服务器模型方面发挥着非常重要的作用。

2. **Linux:** Linux 是一套免费使用和自由传播的类 Unix 操作系统.Linux 存在着许多不同的 Linux 版本，但它们都使用了 **Linux 内核** 。Linux 可安装在各种计算机硬件设备中，比如手机、平板电脑、路由器、视频游戏控制台、台式计算机、大型机和超级计算机。严格来讲，Linux 这个词本身只表示 Linux 内核，但实际上人们已经习惯了用 Linux 来形容整个基于 Linux 内核，并且使用 GNU 工程各种工具和数据库的操作系统。

## 二 初探 Linux

### 2.1 Linux 简介

我们上面已经介绍到了 Linux，我们这里只强调三点。

- **类 Unix 系统：** Linux 是一种自由、开放源码的类似 Unix 的操作系统
- **Linux 内核：** 严格来说，Linux 这个词本身只表示 Linux 内核

```
1. 管理着整台计算机的硬件
2. 建立了计算机软件与硬件之间通讯的平台，内核提供系统服务，比如文件管理、虚拟内存、设备I/O等；
```

## 三 Linux 文件系统概览

### 3.1 Linux 文件系统简介

**在 Linux 操作系统中，所有被操作系统管理的资源，例如网络接口卡、磁盘驱动器、打印机、输入输出设备、普通文件或是目录都被看作是一个文件。**

UNIX 哲学理念：**一切都是文件**。在 UNIX 系统中，把一切资源都看作是文件，包括硬件设备。UNIX 系统把每个硬件都看成是一个文件，通常称为设备文件，这样用户就可以用读写文件的方式实现对硬件的访问。

Linux 是重写 UNIX 而来，所以这个概念也就传承了下来。

### 3.2 文件类型与目录结构

Linux 目录树架构是如何与硬盘内的数据相结合的呢？ -- 也可以使用网络文件系统（Network File System）服务器载入特定目录。

["挂载"](https://www.zhihu.com/question/266907637)就是利用一个目录`（挂载点）`作为进入点，将硬盘分区的数据放置在该目录下。进入该目录就可以读取该分区数据。 -- 本质上无论是目录结构还是操作系统内核都是存储在磁盘上的，但从逻辑上来说 Linux 的磁盘是`"挂载"`在目录上的。

**Linux 支持 5 种文件类型 ：**

| 文件类型         | 描述                                                     | demo         |
| ---------------- | -------------------------------------------------------- | ------------ |
| 普通文件         | 硬盘上存储的信息和数据                                   | any          |
| 目录             | 表示和管理系统中文件                                     | /root、/home |
| 链接             | 不同目录下文件共享                                       | 表示一个网络 |
| 设备             | 访问硬件设备                                             | hardware     |
| 命名管道（FIFO） | 特殊类型文件，Linux 系统下，进程间通信可以通过该文件完成 | stream       |

**Linux 的目录结构如下：**

<div align="center">  <img src="https://github.com/dlm-wizard/dlm-wizard.github.io/blob/master/Linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/assets/Linux%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6.png?raw=true" width=""/></div><br>

**常见目录说明：**

- **/bin：** 存放二进制可执行文件(ls、cat、mkdir 等)，常用命令一般都在这里；
- **/etc：** 存放系统管理和配置文件；
- **/home：** 存放所有用户文件的根目录，是用户主目录的基点，比如用户 user 的主目录就是/home/user，可以用~user 表示；
- **/usr ：** 用于存放系统应用程序；
- **/opt：** 额外安装的可选应用程序包所放置的位置。一般情况下，我们可以把 tomcat 等都安装到这里；
- **/proc：** 虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息；
- **/root：** 超级用户（系统管理员）的主目录（特权阶级^o^）；
- **/sbin:** 存放二进制可执行文件，只有 root 才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序。如 ifconfig 等；
- **/dev：** 用于存放设备文件；
- **/mnt：** 系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的文件系统；
- **/boot：** 存放用于系统引导时使用的各种文件；
- **/lib ：** 存放着和系统运行相关的库文件 ；
- **/tmp：** 用于存放各种临时文件，是公用的临时文件存储点；
- **/var：** 用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的日志文件（系统启动日志等。）等；
- **/lost+found：** 这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows 下叫什么.chk）就在这里。

## 四 Linux 基本命令

下面只是给出了一些比较常用的命令。推荐一个 Linux 命令快查网站，非常不错，大家如果遗忘某些命令或者对某些命令不理解都可以在这里得到解决。

Linux 命令大全：[http://man.linuxde.net/](http://man.linuxde.net/)

### 4.1 目录切换命令

- **`cd /usr`：** 切换到该目录下完整路径
- **`cd../`：** 切换到上一层目录
- **`cd /`：** 切换到系统根目录
- **`cd ~`：** 切换到用户主目录
- **`cd -`：** 切换到上一个操作所在目录

### 4.2 目录的操作命令(增删改查)

1. **`mkdir 目录名称`：** 增加目录
2. **`ls或者ll`**（ll 是 ls -l 的别名，ll 命令可以看到该目录下的所有目录和文件的详细信息）：查看目录信息
3. **`find 目录 参数`：** 寻找目录（查）

   示例：

   - 列出当前目录及子目录下所有文件和文件夹: `find .`
   - 在`/home`目录下查找以.txt 结尾的文件名:`find /home -name "*.txt"`
   - 同上，但忽略大小写: `find /home -iname "*.txt"`
   - 当前目录及子目录下查找所有以.txt 和.pdf 结尾的文件:`find . \( -name "*.txt" -o -name "*.pdf" \)`或`find . -name "*.txt" -o -name "*.pdf"`

4. **`mv 目录名称 新目录名称`：** 修改目录的名称（改）

   注意：mv 的语法不仅可以对目录进行重命名而且也可以对各种文件，压缩包等进行 重命名的操作。mv 命令用来对文件或目录重新命名，或者将文件从一个目录移到另一个目录中。后面会介绍到 mv 命令的另一个用法。

5. **`mv 目录名称 目录的新位置`：** 移动目录的位置---剪切（改）

   注意：mv 语法不仅可以对目录进行剪切操作，对文件和压缩包等都可执行剪切操作。另外 mv 与 cp 的结果不同，mv 好像文件“搬家”，文件个数并未增加。而 cp 对文件进行复制，文件个数增加了。

6. **`cp -r 目录名称 目录拷贝的目标位置`：** 拷贝目录（改），-r 代表递归拷贝

   注意：cp 命令不仅可以拷贝目录还可以拷贝文件，压缩包等，拷贝文件和压缩包时不 用写-r 递归

7. **`rm [-rf] 目录`:** 删除目录（删）

   注意：rm 不仅可以删除目录，也可以删除其他文件或压缩包，为了增强大家的记忆， 无论删除任何目录或文件，都直接使用`rm -rf` 目录/文件/压缩包

### 4.3 文件的操作命令(增删改查)

1. **`touch 文件名称`:**
2. **`cat/more/less/tail 文件名称`** 文件的查看（查）
   - **`cat`：** 查看显示文件内容
   - **`more`：** 可以显示百分比，回车可以向下一行， 空格可以向下一页，q 可以退出查看
   - **`less`：** 可以使用键盘上的 PgUp 和 PgDn 向上 和向下翻页，q 结束查看
   - **`tail-10` ：** 查看文件的后 10 行，Ctrl+C 结束
   - **`echo` ：** 将内容作为标准输出
   - **`管道命令 |` ：** 用于[进程通信](https://github.com/CyC2018/CS-Notes/blob/master/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%20-%20%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.md#1-%E7%AE%A1%E9%81%93)
   - **`>` ：** 重定向标准输出

```
>：覆盖模式
>>：追加模式
```

注意：命令 tail -f 文件 可以对某个文件进行动态监控，例如 tomcat 的日志文件，会随着程序的运行，日志会变化，可以使用 tail -f catalina-2016-11-11.log 监控文件的变化

3. **`vim 文件`：** 修改文件的内容（改）

   vim 编辑器是 Linux 中的强大组件，是 vi 编辑器的加强版，vim 编辑器的命令和快捷方式有很多，但此处不一一阐述，大家也无需研究的很透彻，使用 vim 编辑修改文件的方式基本会使用就可以了。

   **在实际开发中，使用 vim 编辑器主要作用就是修改配置文件，下面是一般步骤：**

   vim 文件------>按 i 进入编辑模式----->按 Esc 进入底行模式----->输入：wq/q!

```bash
:w - 保存
:q - 退出
:wq - 代表写入内容并退出
:q! - 代表强制退出不保存
```

4. **`rm -rf 文件`：** 删除文件（删）

   同目录删除：熟记 `rm -rf` 文件 即可

### 4.4 压缩文件的操作命令

**1）打包并压缩文件：**

Linux 中的打包文件一般是以.tar 结尾的，压缩的命令一般是以.gz 结尾的。

而一般情况下打包和压缩是一起进行的，打包并压缩后的文件的后缀名一般.tar.gz。
命令：**`tar -zcvf 打包压缩后的文件名 要打包压缩的文件`**
其中：

z：调用 gzip 压缩命令进行压缩

c：打包文件

v：显示运行过程

f：指定文件名

比如：假如 test 目录下有三个文件分别是：a.txt b.txt c.txt，如果我们要打包 test 目录并指定压缩后的压缩包名称为 test.tar.gz 可以使用命令：**`tar -zcvf test.tar.gz a.txt b.txt c.txt`或：`tar -zcvf test.tar.gz /test/`**

**2）解压压缩包：**

命令：tar [-xvf] 压缩文件

其中：x：代表解压

示例：

1 将`/test`下的`test.tar.gz`解压到当前目录下可以使用命令：**`tar -xvf test.tar.gz`**

2 将`/test`下的`test.tar.gz`解压到根目录/usr 下:**`tar -xvf test.tar.gz -C /usr`**（- C 代表指定解压的位置）

### 4.5 Linux 的权限命令

操作系统中每个文件都拥有特定的权限、所属用户和所属组。权限是操作系统用来限制资源访问的机制。

分为三组。分别对应文件的属主(owner)，属组(group)和其他用户(other)，通过这样的机制来限制哪些用户、哪些组可以对特定的文件进行什么样的操作。

通过 **`ls -l`** 命令我们可以 查看某个目录下的文件或目录的权限

![文件信息](https://doc.shiyanlou.com/linux_base/3-9.png/wm)

![文件类型](https://doc.shiyanlou.com/linux_base/3-10.png/wm)

[链接数](https://zhuanlan.zhihu.com/p/66170899)

**文件的类型：**

- d： 代表目录
- -： 代表文件
- l： 代表软链接（可以认为是 window 中的快捷方式）

**Linux 中权限分为以下几种：**

- r：read - Number 4
- w：write - Number 2
- x：execute - Number 1

**文件和目录权限的区别：**

对文件和目录而言，读写执行表示不同的意义。

对于文件：

| 权限名称 |              可执行操作 |
| :------- | ----------------------: |
| r        | 可用 cat 查看文件的内容 |
| w        |        可修改文件的内容 |
| x        |        二进制可执行文件 |

对于目录：

| 权限名称 |             可执行操作 |
| :------- | ---------------------: |
| r        |       可查看目录下列表 |
| w        | 可创建和删除目录下文件 |
| x        |     可使用 cd 进入目录 |

**需要注意的是超级用户可以无视普通用户的权限，即使文件目录权限是 000，依旧可以访问。**
**在 linux 中的每个用户必须属于一个组，不能独立于组外。在 linux 中每个文件有所有者、所在组、其它组的概念。**

- **所有者**

  一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者，用 ls ‐ahl 命令可以看到文件的所有者 也可以使用 chown 用户名 文件名来修改文件的所有者 。

- **文件所在组**

  当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组 用 ls ‐ahl 命令可以看到文件的所有组 也可以使用 chgrp 组名 文件名来修改文件所在的组。

- **其它组**

  除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组

> 我们再来看看如何修改文件/目录的权限。

**修改文件/目录的权限的命令：`chmod`**

示例：修改/test 下的 aaa.txt 的权限为属主有全部权限，属主所在的组有读写权限，
其他用户只有读的权限

**`chmod u=rwx,g=rw,o=r aaa.txt`**

上述示例还可以使用数字表示：

chmod 764 aaa.txt

**补充一个比较常用的东西:**

假如我们装了一个 zookeeper，我们每次开机到要求其自动启动该怎么办？

1. 新建一个脚本 zookeeper
2. 为新建的脚本 zookeeper 添加可执行权限，命令是:`chmod +x zookeeper`
3. 把 zookeeper 这个脚本添加到开机启动项里面，命令是：`chkconfig --add zookeeper`
4. 如果想看看是否添加成功，命令是：`chkconfig --list`

### 4.6 Linux 用户管理

Linux 系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。

用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。

**Linux 用户管理相关命令:**

- `sudo useradd/mod/del 选项 用户名`:添加/修改/删除用户账号
- `sudo passwd 用户名`:更改或创建用户的密码
- `sudo passwd -S 用户名` :显示用户账号密码信息
- `sudo passwd -d 用户名`: 清除用户密码
- `groups 用户名`: 所在用户组

```
sudo 用户组可以用 sudo 获取 root 权限
```

- `sudo usermod -G sudo 用户名`: 添加到 sudo 用户组

使用 useradd 指令所建立的帐号，实际上是保存在`/etc/passwd`文本文件中。

系统管理者则能用`passwd命令`管理系统用户的密码，一般用户只能变更自己的密码。

**切换用户**

- `su 用户名`: 用户执行权限
- `su -l 用户名`: 用户执行权限+环境变量
- `ctrl+d`: 注销

### 4.7 Linux 系统用户组的管理

每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同 Linux 系统对用户组的规定有所不同，如创建用户不指定用户组，默认创建与用户名相同用户组

**Linux 系统用户组的管理相关命令:**

实际上就是对`/etc/group`文件的更新。

- `groupadd 选项 用户组` :增加一个新的用户组
- `groupdel 用户组`:要删除一个已有的用户组
- `groupmod 选项 用户组` : 修改用户组的属性

### 4.8 其他常用命令

- **`pwd`：** 显示当前所在位置
- **`grep 要搜索的字符串 要搜索的文件 --color`：** 搜索命令，--color 代表高亮显示
- **`ps -ef`/`ps -aux`：** 这两个命令都是查看当前系统正在运行进程，两者的区别是展示格式不同。如果想要查看特定的进程可以使用这样的格式：**`ps aux|grep redis`** （查看包括 redis 字符串的进程）。

  注意：如果直接用 ps（（Process Status））命令，会显示所有进程的状态，通常结合 grep 命令查看某进程的状态。

- **`kill -9 pid`：** 杀死进程（-9 表示强制终止。）

  先用 ps 查找进程，然后用 kill 杀掉

- **网络通信命令：**
  - 查看当前系统的网卡信息：ifconfig
  - 查看与某台机器的连接情况：ping
  - 查看当前系统的端口使用：netstat -an
- **net-tools 和 iproute2 ：**
  `net-tools`起源于 BSD 的 TCP/IP 工具箱，后来成为老版本 Linux 内核中配置网络功能的工具。但自 2001 年起，Linux 社区已经对其停止维护。同时，一些 Linux 发行版比如 Arch Linux 和 CentOS/RHEL 7 则已经完全抛弃了 net-tools，只支持`iproute2`。linux ip 命令类似于 ifconfig，但功能更强大，旨在替代它。更多详情请阅读[如何在 Linux 中使用 IP 命令和示例](https://linoxide.com/linux-command/use-ip-command-linux)
- **`shutdown`：** `shutdown -h now`： 指定现在立即关机；`shutdown +5 "System will shutdown after 5 minutes"`：指定 5 分钟后关机，同时送出警告信息给登入用户。
- **`reboot`：** **`reboot`：** 重开机。**`reboot -w`：** 做个重开机的模拟（只有纪录并不会真的重开机）。

## 参考

[29 个你必须知道的 Linux 命令](https://github.com/dwqs/blog/issues/24)

[Cache 和 Buffer 都是缓存，主要区别是什么？](https://www.zhihu.com/question/26190832)

[看完这篇 Linux 基本的操作就会了](https://zhuanlan.zhihu.com/p/36801617)

[计算机操作系统](https://github.com/CyC2018/CS-Notes/blob/master/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%20-%20%E7%9B%AE%E5%BD%95.md)

[Linux 命令简写和全称](https://blog.csdn.net/chinayuan/article/details/51291666)

## Linux 命令学习

[学习 1](https://michaelmao.co/2017/05/01/Linux%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0/#Linux%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0)

[学习 2](https://linuxtools-rst.readthedocs.io/zh_CN/latest/base/02_file_manage.html)

列出所有用户登录信息
last

主机（数据包）到主机间路径
traceroute

Linux 默认设备文件名-/dev/sr0
挂载点-/mnt/cdrom
mount /dev/sr0

挂载：找到这个硬件，给他分配一个设备文件名，再给他找一个盘符（目录），然后把他的设备文件名和盘符连接起来，这就是挂载过程。

我们可以通过盘符访问设备

命令 & 配置文件（shell built-in commands 除外）

man cmd

NAME-摘要
SYNOPSIS-操作概要

浏览过程中像 more、less 命名的综合使用

    space-翻页
    enter-下一行
    q-退出
    /-l -查找匹配字符（n-继续匹配）

shell built-in commands
help cmd

测试网络连通性
ping
-c 指定次数
packet loss-丢包率

en0-真实网卡（ping 本机是否网络打通）
lo0-回环网卡-本机测试

网络状态
netstat
-ant 网络服务、网络程序使用网络协议和端口
-tuln - 服务器打开的 port（服务进程）

- rn 网关（GateWay）
  -t - TCP
  -u - UDP
  -l - LISTENING
  -n - 显示 ip 与 port

vi（命令模式）
":"-编辑
"i"-插入
gg-顶部
shift+g-底部
